import{s as G,c as fe,u as de,g as me,a as he,x as _e,i as ge,r as pe,o as ve,y as W,n as oe}from"../chunks/scheduler.CdkXGkJ4.js";import{S as J,i as Q,e as $,c as P,d as M,g as v,o as g,j as I,y as K,t as N,a as q,m as X,q as ae,n as re,s as D,u as O,z,h as j,v as H,k as p,A as Z,w as L,B as be,x as U,b as T,f as F,C as we,l as x}from"../chunks/index.DyCIUgd6.js";function ee(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Ce(s){let e,t,n,l,r;const i=s[5].default,f=fe(i,s,s[4],null);return{c(){e=$("button"),f&&f.c(),this.h()},l(u){e=P(u,"BUTTON",{class:!0,type:!0});var c=M(e);f&&f.l(c),c.forEach(v),this.h()},h(){g(e,"class",t="button "+s[1]+" "+s[0]+" svelte-1ntdbj4"),g(e,"type",s[2]),e.disabled=s[3]},m(u,c){I(u,e,c),f&&f.m(e,null),n=!0,l||(r=K(e,"click",s[6]),l=!0)},p(u,[c]){f&&f.p&&(!n||c&16)&&de(f,i,u,u[4],n?he(i,u[4],c,null):me(u[4]),null),(!n||c&3&&t!==(t="button "+u[1]+" "+u[0]+" svelte-1ntdbj4"))&&g(e,"class",t),(!n||c&4)&&g(e,"type",u[2]),(!n||c&8)&&(e.disabled=u[3])},i(u){n||(N(f,u),n=!0)},o(u){q(f,u),n=!1},d(u){u&&v(e),f&&f.d(u),l=!1,r()}}}function $e(s,e,t){let{$$slots:n={},$$scope:l}=e,{className:r=""}=e,{variant:i="primary"}=e,{type:f="button"}=e,{disabled:u=!1}=e;function c(d){_e.call(this,s,d)}return s.$$set=d=>{"className"in d&&t(0,r=d.className),"variant"in d&&t(1,i=d.variant),"type"in d&&t(2,f=d.type),"disabled"in d&&t(3,u=d.disabled),"$$scope"in d&&t(4,l=d.$$scope)},[r,i,f,u,l,n,c]}class R extends J{constructor(e){super(),Q(this,e,$e,Ce,G,{className:0,variant:1,type:2,disabled:3})}}function te(s){let e,t,n,l="Ã—",r,i,f="Enter PIN",u,c,d,b,a,S,o,h;return a=new R({props:{type:"submit",$$slots:{default:[Pe]},$$scope:{ctx:s}}}),{c(){e=$("div"),t=$("div"),n=$("button"),n.textContent=l,r=D(),i=$("h2"),i.textContent=f,u=D(),c=$("form"),d=$("input"),b=D(),O(a.$$.fragment),this.h()},l(_){e=P(_,"DIV",{class:!0});var w=M(e);t=P(w,"DIV",{class:!0});var m=M(t);n=P(m,"BUTTON",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1863m0g"&&(n.textContent=l),r=j(m),i=P(m,"H2",{"data-svelte-h":!0}),z(i)!=="svelte-zcibv1"&&(i.textContent=f),u=j(m),c=P(m,"FORM",{class:!0});var y=M(c);d=P(y,"INPUT",{type:!0,inputmode:!0,pattern:!0,placeholder:!0,autocomplete:!0,class:!0}),b=j(y),H(a.$$.fragment,y),y.forEach(v),m.forEach(v),w.forEach(v),this.h()},h(){g(n,"class","close svelte-vgtoh9"),g(d,"type","password"),g(d,"inputmode","numeric"),g(d,"pattern","[0-9]*"),g(d,"placeholder","Enter PIN"),g(d,"autocomplete","one-time-code"),g(d,"class","svelte-vgtoh9"),g(c,"class","svelte-vgtoh9"),g(t,"class","modal-content svelte-vgtoh9"),g(e,"class","modal svelte-vgtoh9")},m(_,w){I(_,e,w),p(e,t),p(t,n),p(t,r),p(t,i),p(t,u),p(t,c),p(c,d),Z(d,s[2]),p(c,b),L(a,c,null),S=!0,o||(h=[K(n,"click",function(){ge(s[1])&&s[1].apply(this,arguments)}),K(d,"input",s[5]),K(c,"submit",be(s[3]))],o=!0)},p(_,w){s=_,w&4&&d.value!==s[2]&&Z(d,s[2]);const m={};w&64&&(m.$$scope={dirty:w,ctx:s}),a.$set(m)},i(_){S||(N(a.$$.fragment,_),S=!0)},o(_){q(a.$$.fragment,_),S=!1},d(_){_&&v(e),U(a),o=!1,pe(h)}}}function Pe(s){let e;return{c(){e=T("Sign In")},l(t){e=F(t,"Sign In")},m(t,n){I(t,e,n)},d(t){t&&v(e)}}}function Se(s){let e,t,n=s[0]&&te(s);return{c(){n&&n.c(),e=X()},l(l){n&&n.l(l),e=X()},m(l,r){n&&n.m(l,r),I(l,e,r),t=!0},p(l,[r]){l[0]?n?(n.p(l,r),r&1&&N(n,1)):(n=te(l),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(ae(),q(n,1,1,()=>{n=null}),re())},i(l){t||(N(n),t=!0)},o(l){q(n),t=!1},d(l){l&&v(e),n&&n.d(l)}}}function ke(s,e,t){let{show:n=!1}=e,{authenticate:l}=e,{close:r}=e,i="";const f=()=>{l(i),t(2,i="")};function u(){i=this.value,t(2,i)}return s.$$set=c=>{"show"in c&&t(0,n=c.show),"authenticate"in c&&t(4,l=c.authenticate),"close"in c&&t(1,r=c.close)},[n,r,i,f,l,u]}class Ee extends J{constructor(e){super(),Q(this,e,ke,Se,G,{show:0,authenticate:4,close:1})}}const Ne="KiddieCoinsDB",B="people",ne=[{name:"Everett",coins:0,img:"images/everett.webp"},{name:"Ellison",coins:0,img:"images/ellison.webp"},{name:"River",coins:0,img:"images/river.webp"}];function ie(){return new Promise((s,e)=>{const t=indexedDB.open(Ne,1);t.onupgradeneeded=n=>{const l=n.target.result;let r;l.objectStoreNames.contains(B)||(r=l.createObjectStore(B,{keyPath:"name"}),ne.forEach(i=>{r.add(i)}))},t.onsuccess=n=>{const l=n.target.result;l.transaction(B).objectStore(B).count().onsuccess=r=>{if(r.target.result===0){const i=l.transaction(B,"readwrite"),f=i.objectStore(B);ne.forEach(u=>f.add(u)),i.oncomplete=()=>s(l),i.onerror=u=>e(u.target.error)}else s(l)}},t.onerror=n=>e(n.target.error)})}async function Ie(s){const t=(await ie()).transaction(B,"readwrite"),n=t.objectStore(B);return s.forEach(l=>{n.put(l)}),new Promise((l,r)=>{t.oncomplete=()=>l(),t.onerror=()=>r(t.error)})}async function ye(){const t=(await ie()).transaction(B,"readonly").objectStore(B);return new Promise((n,l)=>{const r=t.getAll();r.onsuccess=()=>n(r.result),r.onerror=()=>l(r.error)})}function se(s,e,t){const n=s.slice();return n[9]=e[t],n[11]=t,n}function De(s){let e;return{c(){e=T("Login")},l(t){e=F(t,"Login")},m(t,n){I(t,e,n)},d(t){t&&v(e)}}}function je(s){let e,t="-";return{c(){e=$("span"),e.textContent=t,this.h()},l(n){e=P(n,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1vs2q8l"&&(e.textContent=t),this.h()},h(){g(e,"class","plus-minus svelte-1suvo2d")},m(n,l){I(n,e,l)},p:oe,d(n){n&&v(e)}}}function Be(s){let e,t="+";return{c(){e=$("span"),e.textContent=t,this.h()},l(n){e=P(n,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1i4yz6j"&&(e.textContent=t),this.h()},h(){g(e,"class","plus-minus svelte-1suvo2d")},m(n,l){I(n,e,l)},p:oe,d(n){n&&v(e)}}}function le(s){let e,t,n,l,r,i,f,u=s[9].name+"",c,d,b,a=s[9].coins+"",S,o,h,_,w,m,y,A;function ce(){return s[6](s[11])}_=new R({props:{variant:"secondary",disabled:s[2],$$slots:{default:[je]},$$scope:{ctx:s}}}),_.$on("click",ce);function ue(){return s[7](s[11])}return m=new R({props:{disabled:s[2],$$slots:{default:[Be]},$$scope:{ctx:s}}}),m.$on("click",ue),{c(){e=$("div"),t=$("img"),r=D(),i=$("div"),f=$("h3"),c=T(u),d=D(),b=$("p"),S=T(a),o=T(" coins"),h=D(),O(_.$$.fragment),w=D(),O(m.$$.fragment),y=D(),this.h()},l(k){e=P(k,"DIV",{class:!0});var C=M(e);t=P(C,"IMG",{src:!0,alt:!0,class:!0}),r=j(C),i=P(C,"DIV",{class:!0});var E=M(i);f=P(E,"H3",{});var V=M(f);c=F(V,u),V.forEach(v),d=j(E),b=P(E,"P",{});var Y=M(b);S=F(Y,a),o=F(Y," coins"),Y.forEach(v),h=j(E),H(_.$$.fragment,E),w=j(E),H(m.$$.fragment,E),E.forEach(v),y=j(C),C.forEach(v),this.h()},h(){W(t.src,n=s[9].img)||g(t,"src",n),g(t,"alt",l=s[9].name),g(t,"class","person-image svelte-1suvo2d"),g(i,"class","card-body svelte-1suvo2d"),g(e,"class","card svelte-1suvo2d")},m(k,C){I(k,e,C),p(e,t),p(e,r),p(e,i),p(i,f),p(f,c),p(i,d),p(i,b),p(b,S),p(b,o),p(i,h),L(_,i,null),p(i,w),L(m,i,null),p(e,y),A=!0},p(k,C){s=k,(!A||C&1&&!W(t.src,n=s[9].img))&&g(t,"src",n),(!A||C&1&&l!==(l=s[9].name))&&g(t,"alt",l),(!A||C&1)&&u!==(u=s[9].name+"")&&x(c,u),(!A||C&1)&&a!==(a=s[9].coins+"")&&x(S,a);const E={};C&4&&(E.disabled=s[2]),C&4096&&(E.$$scope={dirty:C,ctx:s}),_.$set(E);const V={};C&4&&(V.disabled=s[2]),C&4096&&(V.$$scope={dirty:C,ctx:s}),m.$set(V)},i(k){A||(N(_.$$.fragment,k),N(m.$$.fragment,k),A=!0)},o(k){q(_.$$.fragment,k),q(m.$$.fragment,k),A=!1},d(k){k&&v(e),U(_),U(m)}}}function Me(s){let e,t,n="Kiddie Coins",l,r,i,f,u,c,d;r=new R({props:{variant:"secondary",$$slots:{default:[De]},$$scope:{ctx:s}}}),r.$on("click",s[4]),f=new Ee({props:{show:s[1],authenticate:s[3],close:s[4]}});let b=ee(s[0]),a=[];for(let o=0;o<b.length;o+=1)a[o]=le(se(s,b,o));const S=o=>q(a[o],1,1,()=>{a[o]=null});return{c(){e=$("div"),t=$("h1"),t.textContent=n,l=D(),O(r.$$.fragment),i=D(),O(f.$$.fragment),u=D(),c=$("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=P(o,"DIV",{class:!0});var h=M(e);t=P(h,"H1",{"data-svelte-h":!0}),z(t)!=="svelte-d1y84k"&&(t.textContent=n),l=j(h),H(r.$$.fragment,h),h.forEach(v),i=j(o),H(f.$$.fragment,o),u=j(o),c=P(o,"DIV",{class:!0});var _=M(c);for(let w=0;w<a.length;w+=1)a[w].l(_);_.forEach(v),this.h()},h(){g(e,"class","header svelte-1suvo2d"),g(c,"class","container svelte-1suvo2d")},m(o,h){I(o,e,h),p(e,t),p(e,l),L(r,e,null),I(o,i,h),L(f,o,h),I(o,u,h),I(o,c,h);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(c,null);d=!0},p(o,[h]){const _={};h&4096&&(_.$$scope={dirty:h,ctx:o}),r.$set(_);const w={};if(h&2&&(w.show=o[1]),f.$set(w),h&37){b=ee(o[0]);let m;for(m=0;m<b.length;m+=1){const y=se(o,b,m);a[m]?(a[m].p(y,h),N(a[m],1)):(a[m]=le(y),a[m].c(),N(a[m],1),a[m].m(c,null))}for(ae(),m=b.length;m<a.length;m+=1)S(m);re()}},i(o){if(!d){N(r.$$.fragment,o),N(f.$$.fragment,o);for(let h=0;h<b.length;h+=1)N(a[h]);d=!0}},o(o){q(r.$$.fragment,o),q(f.$$.fragment,o),a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)q(a[h]);d=!1},d(o){o&&(v(e),v(i),v(u),v(c)),U(r),U(f,o),we(a,o)}}}function qe(){const s=new Date,e=String(s.getMonth()+1).padStart(2,"0"),t=String(s.getDate()).padStart(2,"0"),n=String(s.getFullYear()).slice(-2);return e+t+n}function Ae(s,e,t){let n=[];ve(async()=>{t(0,n=await ye())});let l=!1,r=!1,i=!1;function f(a){const S=qe();a===S?(r=!0,t(1,l=!1)):alert("Incorrect PIN")}function u(){t(1,l=!l)}async function c(a,S=!0){if(!r){alert("You must be signed in to edit coins!");return}const{coins:o}=n[a],h=S?o+1:o-1;if(h<0){alert("Coin count cannot be negative.");return}t(2,i=!0);try{t(0,n[a].coins=h,n),await Ie(n)}catch(_){console.error("Failed to update coins:",_),alert("Failed to update coins.")}finally{t(2,i=!1)}}return[n,l,i,f,u,c,a=>c(a,!1),a=>c(a)]}class Fe extends J{constructor(e){super(),Q(this,e,Ae,Me,G,{})}}export{Fe as component};
