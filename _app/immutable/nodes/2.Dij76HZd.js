import{s as R,c as de,u as he,g as me,a as _e,x as pe,i as ge,r as ve,o as be,y as W,n as ae}from"../chunks/scheduler.CdkXGkJ4.js";import{S as J,i as Q,e as w,c as C,d as q,g as b,o as v,j as I,y as G,t as N,a as B,m as X,q as ie,n as re,s as y,u as H,z as O,h as D,v as U,k as g,A as Z,w as Y,x as K,b as T,f as z,B as $e,l as x}from"../chunks/index.D-k3M52J.js";function ee(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function we(s){let e,t,n,l,a;const r=s[4].default,f=de(r,s,s[3],null);return{c(){e=w("button"),f&&f.c(),this.h()},l(u){e=C(u,"BUTTON",{class:!0,type:!0});var o=q(e);f&&f.l(o),o.forEach(b),this.h()},h(){v(e,"class",t="button "+s[1]+" "+s[0]+" svelte-1ntdbj4"),v(e,"type",s[2])},m(u,o){I(u,e,o),f&&f.m(e,null),n=!0,l||(a=G(e,"click",s[5]),l=!0)},p(u,[o]){f&&f.p&&(!n||o&8)&&he(f,r,u,u[3],n?_e(r,u[3],o,null):me(u[3]),null),(!n||o&3&&t!==(t="button "+u[1]+" "+u[0]+" svelte-1ntdbj4"))&&v(e,"class",t),(!n||o&4)&&v(e,"type",u[2])},i(u){n||(N(f,u),n=!0)},o(u){B(f,u),n=!1},d(u){u&&b(e),f&&f.d(u),l=!1,a()}}}function Ce(s,e,t){let{$$slots:n={},$$scope:l}=e,{className:a=""}=e,{variant:r="primary"}=e,{type:f="button"}=e;function u(o){pe.call(this,s,o)}return s.$$set=o=>{"className"in o&&t(0,a=o.className),"variant"in o&&t(1,r=o.variant),"type"in o&&t(2,f=o.type),"$$scope"in o&&t(3,l=o.$$scope)},[a,r,f,l,n,u]}class L extends J{constructor(e){super(),Q(this,e,Ce,we,R,{className:0,variant:1,type:2})}}function te(s){let e,t,n,l="Ã—",a,r,f="Enter PIN",u,o,k,m,i,S,c;return m=new L({props:{type:"submit",$$slots:{default:[ke]},$$scope:{ctx:s}}}),m.$on("click",s[3]),{c(){e=w("div"),t=w("div"),n=w("button"),n.textContent=l,a=y(),r=w("h2"),r.textContent=f,u=y(),o=w("input"),k=y(),H(m.$$.fragment),this.h()},l(d){e=C(d,"DIV",{class:!0});var h=q(e);t=C(h,"DIV",{class:!0});var p=q(t);n=C(p,"BUTTON",{class:!0,"data-svelte-h":!0}),O(n)!=="svelte-1863m0g"&&(n.textContent=l),a=D(p),r=C(p,"H2",{"data-svelte-h":!0}),O(r)!=="svelte-zcibv1"&&(r.textContent=f),u=D(p),o=C(p,"INPUT",{type:!0,placeholder:!0,class:!0}),k=D(p),U(m.$$.fragment,p),p.forEach(b),h.forEach(b),this.h()},h(){v(n,"class","close svelte-h208v3"),v(o,"type","password"),v(o,"placeholder","Enter PIN"),v(o,"class","svelte-h208v3"),v(t,"class","modal-content svelte-h208v3"),v(e,"class","modal svelte-h208v3")},m(d,h){I(d,e,h),g(e,t),g(t,n),g(t,a),g(t,r),g(t,u),g(t,o),Z(o,s[2]),g(t,k),Y(m,t,null),i=!0,S||(c=[G(n,"click",function(){ge(s[1])&&s[1].apply(this,arguments)}),G(o,"input",s[5])],S=!0)},p(d,h){s=d,h&4&&o.value!==s[2]&&Z(o,s[2]);const p={};h&64&&(p.$$scope={dirty:h,ctx:s}),m.$set(p)},i(d){i||(N(m.$$.fragment,d),i=!0)},o(d){B(m.$$.fragment,d),i=!1},d(d){d&&b(e),K(m),S=!1,ve(c)}}}function ke(s){let e;return{c(){e=T("Sign In")},l(t){e=z(t,"Sign In")},m(t,n){I(t,e,n)},d(t){t&&b(e)}}}function Pe(s){let e,t,n=s[0]&&te(s);return{c(){n&&n.c(),e=X()},l(l){n&&n.l(l),e=X()},m(l,a){n&&n.m(l,a),I(l,e,a),t=!0},p(l,[a]){l[0]?n?(n.p(l,a),a&1&&N(n,1)):(n=te(l),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(ie(),B(n,1,1,()=>{n=null}),re())},i(l){t||(N(n),t=!0)},o(l){B(n),t=!1},d(l){l&&b(e),n&&n.d(l)}}}function Se(s,e,t){let{show:n=!1}=e,{authenticate:l}=e,{close:a}=e,r="";const f=()=>{l(r),t(2,r="")};function u(){r=this.value,t(2,r)}return s.$$set=o=>{"show"in o&&t(0,n=o.show),"authenticate"in o&&t(4,l=o.authenticate),"close"in o&&t(1,a=o.close)},[n,a,r,f,l,u]}class Ee extends J{constructor(e){super(),Q(this,e,Se,Pe,R,{show:0,authenticate:4,close:1})}}const Ne="KiddieCoinsDB",j="people",ne=[{name:"Everett",coins:0,img:"images/everett.webp"},{name:"Ellison",coins:0,img:"images/ellison.webp"},{name:"River",coins:0,img:"images/river.webp"}];function ce(){return new Promise((s,e)=>{const t=indexedDB.open(Ne,1);t.onupgradeneeded=n=>{const l=n.target.result;let a;l.objectStoreNames.contains(j)||(a=l.createObjectStore(j,{keyPath:"name"}),ne.forEach(r=>{a.add(r)}))},t.onsuccess=n=>{const l=n.target.result;l.transaction(j).objectStore(j).count().onsuccess=a=>{if(a.target.result===0){const r=l.transaction(j,"readwrite"),f=r.objectStore(j);ne.forEach(u=>f.add(u)),r.oncomplete=()=>s(l),r.onerror=u=>e(u.target.error)}else s(l)}},t.onerror=n=>e(n.target.error)})}async function se(s){const t=(await ce()).transaction(j,"readwrite"),n=t.objectStore(j);return s.forEach(l=>{n.put(l)}),new Promise((l,a)=>{t.oncomplete=()=>l(),t.onerror=()=>a(t.error)})}async function Ie(){const t=(await ce()).transaction(j,"readonly").objectStore(j);return new Promise((n,l)=>{const a=t.getAll();a.onsuccess=()=>n(a.result),a.onerror=()=>l(a.error)})}function le(s,e,t){const n=s.slice();return n[9]=e[t],n[11]=t,n}function ye(s){let e;return{c(){e=T("Login")},l(t){e=z(t,"Login")},m(t,n){I(t,e,n)},d(t){t&&b(e)}}}function De(s){let e,t="-";return{c(){e=w("span"),e.textContent=t,this.h()},l(n){e=C(n,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1vs2q8l"&&(e.textContent=t),this.h()},h(){v(e,"class","plus-minus svelte-1suvo2d")},m(n,l){I(n,e,l)},p:ae,d(n){n&&b(e)}}}function je(s){let e,t="+";return{c(){e=w("span"),e.textContent=t,this.h()},l(n){e=C(n,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1i4yz6j"&&(e.textContent=t),this.h()},h(){v(e,"class","plus-minus svelte-1suvo2d")},m(n,l){I(n,e,l)},p:ae,d(n){n&&b(e)}}}function oe(s){let e,t,n,l,a,r,f,u=s[9].name+"",o,k,m,i=s[9].coins+"",S,c,d,h,p,_,M,A;function ue(){return s[7](s[11])}h=new L({props:{variant:"secondary",disabled:!s[2],$$slots:{default:[De]},$$scope:{ctx:s}}}),h.$on("click",ue);function fe(){return s[8](s[11])}return _=new L({props:{disabled:!s[2],$$slots:{default:[je]},$$scope:{ctx:s}}}),_.$on("click",fe),{c(){e=w("div"),t=w("img"),a=y(),r=w("div"),f=w("h3"),o=T(u),k=y(),m=w("p"),S=T(i),c=T(" coins"),d=y(),H(h.$$.fragment),p=y(),H(_.$$.fragment),M=y(),this.h()},l(P){e=C(P,"DIV",{class:!0});var $=q(e);t=C($,"IMG",{src:!0,alt:!0,class:!0}),a=D($),r=C($,"DIV",{class:!0});var E=q(r);f=C(E,"H3",{});var V=q(f);o=z(V,u),V.forEach(b),k=D(E),m=C(E,"P",{});var F=q(m);S=z(F,i),c=z(F," coins"),F.forEach(b),d=D(E),U(h.$$.fragment,E),p=D(E),U(_.$$.fragment,E),E.forEach(b),M=D($),$.forEach(b),this.h()},h(){W(t.src,n=s[9].img)||v(t,"src",n),v(t,"alt",l=s[9].name),v(t,"class","person-image svelte-1suvo2d"),v(r,"class","card-body svelte-1suvo2d"),v(e,"class","card svelte-1suvo2d")},m(P,$){I(P,e,$),g(e,t),g(e,a),g(e,r),g(r,f),g(f,o),g(r,k),g(r,m),g(m,S),g(m,c),g(r,d),Y(h,r,null),g(r,p),Y(_,r,null),g(e,M),A=!0},p(P,$){s=P,(!A||$&1&&!W(t.src,n=s[9].img))&&v(t,"src",n),(!A||$&1&&l!==(l=s[9].name))&&v(t,"alt",l),(!A||$&1)&&u!==(u=s[9].name+"")&&x(o,u),(!A||$&1)&&i!==(i=s[9].coins+"")&&x(S,i);const E={};$&4&&(E.disabled=!s[2]),$&4096&&(E.$$scope={dirty:$,ctx:s}),h.$set(E);const V={};$&4&&(V.disabled=!s[2]),$&4096&&(V.$$scope={dirty:$,ctx:s}),_.$set(V)},i(P){A||(N(h.$$.fragment,P),N(_.$$.fragment,P),A=!0)},o(P){B(h.$$.fragment,P),B(_.$$.fragment,P),A=!1},d(P){P&&b(e),K(h),K(_)}}}function Be(s){let e,t,n="Kiddie Coins",l,a,r,f,u,o,k;a=new L({props:{variant:"secondary",$$slots:{default:[ye]},$$scope:{ctx:s}}}),a.$on("click",s[4]),f=new Ee({props:{show:s[1],authenticate:s[3],close:s[4]}});let m=ee(s[0]),i=[];for(let c=0;c<m.length;c+=1)i[c]=oe(le(s,m,c));const S=c=>B(i[c],1,1,()=>{i[c]=null});return{c(){e=w("div"),t=w("h1"),t.textContent=n,l=y(),H(a.$$.fragment),r=y(),H(f.$$.fragment),u=y(),o=w("div");for(let c=0;c<i.length;c+=1)i[c].c();this.h()},l(c){e=C(c,"DIV",{class:!0});var d=q(e);t=C(d,"H1",{"data-svelte-h":!0}),O(t)!=="svelte-d1y84k"&&(t.textContent=n),l=D(d),U(a.$$.fragment,d),d.forEach(b),r=D(c),U(f.$$.fragment,c),u=D(c),o=C(c,"DIV",{class:!0});var h=q(o);for(let p=0;p<i.length;p+=1)i[p].l(h);h.forEach(b),this.h()},h(){v(e,"class","header svelte-1suvo2d"),v(o,"class","container svelte-1suvo2d")},m(c,d){I(c,e,d),g(e,t),g(e,l),Y(a,e,null),I(c,r,d),Y(f,c,d),I(c,u,d),I(c,o,d);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(o,null);k=!0},p(c,[d]){const h={};d&4096&&(h.$$scope={dirty:d,ctx:c}),a.$set(h);const p={};if(d&2&&(p.show=c[1]),f.$set(p),d&101){m=ee(c[0]);let _;for(_=0;_<m.length;_+=1){const M=le(c,m,_);i[_]?(i[_].p(M,d),N(i[_],1)):(i[_]=oe(M),i[_].c(),N(i[_],1),i[_].m(o,null))}for(ie(),_=m.length;_<i.length;_+=1)S(_);re()}},i(c){if(!k){N(a.$$.fragment,c),N(f.$$.fragment,c);for(let d=0;d<m.length;d+=1)N(i[d]);k=!0}},o(c){B(a.$$.fragment,c),B(f.$$.fragment,c),i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)B(i[d]);k=!1},d(c){c&&(b(e),b(r),b(u),b(o)),K(a),K(f,c),$e(i,c)}}}function qe(){const s=new Date,e=String(s.getMonth()+1).padStart(2,"0"),t=String(s.getDate()).padStart(2,"0"),n=String(s.getFullYear()).slice(-2);return e+t+n}function Ae(s,e,t){let n=[];be(async()=>{const i=await Ie();t(0,n=i),console.log("p:",i)});let l=!1,a=!1;function r(i){const S=qe();i===S?(t(2,a=!0),t(1,l=!1)):alert("Incorrect PIN")}function f(){t(1,l=!l)}async function u(i){a?(t(0,n[i].coins+=1,n),await se(n)):alert("You must be signed in to edit coins!")}async function o(i){a?(t(0,n[i].coins-=1,n),await se(n)):alert("You must be signed in to edit coins!")}return[n,l,a,r,f,u,o,i=>o(i),i=>u(i)]}class Te extends J{constructor(e){super(),Q(this,e,Ae,Be,R,{})}}export{Te as component};
